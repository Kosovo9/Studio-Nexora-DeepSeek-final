(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{4452:function(e,t,s){Promise.resolve().then(s.bind(s,9548))},9548:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),r=s(2265),n=s(3073),l=s(4258),i=s(8954);/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s(3480).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=s(994);function d(){let{user:e,isLoaded:t}=(0,n.aF)(),[s,d]=(0,r.useState)([]),[u,h]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{t&&e&&y()},[t,e]),(0,r.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);let y=async()=>{try{let e=await fetch("/api/admin/chat/history"),t=await e.json();d(t.messages||[])}catch(e){console.error("Error loading chat history:",e)}},g=async()=>{if(!u.trim()||x)return;let e={id:Date.now().toString(),role:"user",content:u,timestamp:new Date};d(t=>[...t,e]),h(""),m(!0);try{let e=await fetch("/api/admin/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:u,history:s})}),t=await e.json(),a={id:(Date.now()+1).toString(),role:"assistant",content:t.response,timestamp:new Date};d(e=>[...e,a])}catch(t){console.error("Error sending message:",t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};d(t=>[...t,e])}finally{m(!1)}};return t?e?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white flex flex-col",children:(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl flex-1 flex flex-col p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Support Chat"}),(0,a.jsxs)("a",{href:"/admin/chat/settings",className:"px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Settings"})]})]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-800/50 rounded-lg p-6 mb-4 overflow-y-auto",children:0===s.length?(0,a.jsxs)("div",{className:"text-center text-gray-400 mt-8",children:[(0,a.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Start a conversation with the support chatbot"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"max-w-[70%] rounded-lg p-4 ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-700 text-gray-100"),children:[(0,a.jsx)("p",{children:e.content}),(0,a.jsx)("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString()})]}),"user"===e.role&&(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(c,{className:"w-5 h-5"})})]},e.id)),x&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),(0,a.jsx)("div",{ref:f})]})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),placeholder:"Type your message...",className:"flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500",disabled:x}),(0,a.jsxs)("button",{onClick:g,disabled:x||!u.trim(),className:"px-6 py-3 bg-blue-500 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Send"})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Please sign in to access chat"})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading..."})})}},3480:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{color:i="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...x}=s;return(0,a.createElement)("svg",{ref:l,...r,width:c,height:c,stroke:i,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},8954:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(3480).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},994:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(3480).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},4258:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(3480).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[73,971,23,744],function(){return e(e.s=4452)}),_N_E=e.O()}]);