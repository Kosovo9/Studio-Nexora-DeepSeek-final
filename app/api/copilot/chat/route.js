"use strict";(()=>{var e={};e.id=8867,e.ids=[8867],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},6005:e=>{e.exports=require("node:crypto")},30263:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var a={};t.r(a),t.d(a,{POST:()=>u,dynamic:()=>d});var r=t(49303),s=t(88716),n=t(60670),i=t(87070),c=t(81584),p=t(85662);let d="force-dynamic";async function u(e){try{let{userId:o}=await (0,c.I)(),{message:t,history:a,language:r,userId:s}=await e.json();if(!t)return i.NextResponse.json({error:"Missing message"},{status:400});let n=o||s,d={en:{"how do i upload photos":'To upload photos, click the "Upload Photos" button and select at least 3 images from your device. Supported formats: JPG, PNG.',"what styles are available":"We offer two AI styles: Dark Studio (professional dark lighting) and Paris Caf\xe9 (warm, cozy atmosphere).","how long does generation take":"AI generation typically takes 12-20 seconds. You'll see a progress bar and timer during the process.","how do i download my photo":"After payment, you can download your photo without watermark. Downloads are available for 24 hours.","what payment methods do you accept":"We accept credit cards via Stripe and bank transfers (Mexico).",default:"I'm here to help! You can ask me about photo upload, styles, generation time, downloads, or payments. How can I assist you?"},es:{"c\xf3mo subo fotos":'Para subir fotos, haz clic en "Subir Fotos" y selecciona al menos 3 im\xe1genes. Formatos soportados: JPG, PNG.',"qu\xe9 estilos hay disponibles":"Ofrecemos dos estilos AI: Dark Studio (iluminaci\xf3n oscura profesional) y Paris Caf\xe9 (atm\xf3sfera c\xe1lida y acogedora).","cu\xe1nto tarda la generaci\xf3n":"La generaci\xf3n AI normalmente toma 12-20 segundos. Ver\xe1s una barra de progreso y temporizador durante el proceso.","c\xf3mo descargo mi foto":"Despu\xe9s del pago, puedes descargar tu foto sin marca de agua. Las descargas est\xe1n disponibles por 24 horas.","qu\xe9 m\xe9todos de pago aceptan":"Aceptamos tarjetas de cr\xe9dito v\xeda Stripe y transferencias bancarias (M\xe9xico).",default:"\xa1Estoy aqu\xed para ayudar! Puedes preguntarme sobre subir fotos, estilos, tiempo de generaci\xf3n, descargas o pagos. \xbfEn qu\xe9 te puedo ayudar?"}},u=d[r||"en"]||d.en,l=t.toLowerCase(),m=u.default;for(let[e,o]of Object.entries(u))if("default"!==e&&l.includes(e)){m=o;break}if(n)try{let{error:e}=await p.O.from("copilot_history").insert({user_id:n,message:t,response:m,language:r||"en",created_at:new Date().toISOString()});e&&console.error("Error saving to copilot_history:",e)}catch(e){console.error("Error saving to copilot_history:",e)}return i.NextResponse.json({response:m})}catch(e){return console.error("Copilot chat error:",e),i.NextResponse.json({error:"Internal server error",details:e.message},{status:500})}}let l=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/copilot/chat/route",pathname:"/api/copilot/chat",filename:"route",bundlePath:"app/api/copilot/chat/route"},resolvedPagePath:"C:\\estudio-nexora-comet\\app\\api\\copilot\\chat\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h}=l,y="/api/copilot/chat/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},85662:(e,o,t)=>{t.d(o,{O:()=>a});let a=(0,t(76429).eI)("https://mdngrazjggsunpvtwbam.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1kbmdyYXpqZ2dzdW5wdnR3YmFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1NjMyMDQsImV4cCI6MjA3ODEzOTIwNH0.EZD2ujsGnwUtz8rafZHOe8vDMOdoOcNYx8kBClqQxWs")}};var o=require("../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),a=o.X(0,[2510,1584,6628],()=>t(30263));module.exports=a})();